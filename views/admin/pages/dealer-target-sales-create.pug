extends ../layouts/default.pug
include ../mixins/form-group.pug
include ../mixins/dealer-sidebar.pug

block main
  .row
    +dealer-sidebar(dealer, 'target-sales')
    .col-md-9.col-lg-10
      .card
        .card-header
          .row.align-items-center
            .col
              h4.card-title #{pageTitle}
              small.text-muted Đại lý: #{dealer.name} (#{dealer.code})
            .col-auto
              a.btn.btn-secondary(
                href=`/${pathAdmin}/dealer/${dealer.id}/target-sales/list`
                )
                i.fa-solid.fa-arrow-left.me-1
                | Quay lại
        .card-body.pt-0
          form(id="targetSalesCreateForm")
            .row
              .col-md-6.col-lg-6
                .mb-3
                  label.form-label(for="year") Năm *
                  select.form-select(id="year" name="year" required)
                    option(value="") -- Chọn năm --
                    - const currentYear = new Date().getFullYear()
                    - for (let y = currentYear - 5; y <= currentYear + 5; y++)
                      if usedYears && usedYears.includes(y)
                        option(value=y disabled) #{y} (Đã có chỉ tiêu)
                      else
                        option(value=y) #{y}
              .col-md-6.col-lg-6
                .mb-3
                  label.form-label(for="yearlyTarget") Chỉ tiêu năm (đ) *
                  input.form-control(id="yearlyTarget" type="number" name="yearlyTarget" required)
            
            hr
            
            h5.mb-3 Chỉ tiêu theo quý
            .row
              .col-md-3.col-lg-3
                .mb-3
                  label.form-label(for="quarter1") Quý 1 (đ)
                  input.form-control(id="quarter1" type="number" name="quarter1" value="0")
              .col-md-3.col-lg-3
                .mb-3
                  label.form-label(for="quarter2") Quý 2 (đ)
                  input.form-control(id="quarter2" type="number" name="quarter2" value="0")
              .col-md-3.col-lg-3
                .mb-3
                  label.form-label(for="quarter3") Quý 3 (đ)
                  input.form-control(id="quarter3" type="number" name="quarter3" value="0")
              .col-md-3.col-lg-3
                .mb-3
                  label.form-label(for="quarter4") Quý 4 (đ)
                  input.form-control(id="quarter4" type="number" name="quarter4" value="0")
            
            hr
            
            h5.mb-3 Số chiếc theo tháng
            .row
              - const months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12']
              each month, index in months
                .col-md-3.col-lg-3
                  .mb-3
                    label.form-label(for=`month${index + 1}`) #{month} (chiếc)
                    input.form-control(id=`month${index + 1}` type="number" name=`month${index + 1}` value="0" min="0")
            
            hr
            
            .row
              .col-md-12.col-lg-12
                .mb-3
                  label.form-label(for="note") Ghi chú
                  textarea.form-control(id="note" name="note" rows="3")
            
            button.btn.btn-primary(type="submit") Tạo mới
            a.btn.btn-danger.ms-1(href=`/${pathAdmin}/dealer/${dealer.id}/target-sales/list`) Hủy

